<template>
    <div class="mt-10" @click="showHeroEditor">
        <div class="carousel carousel-slider" id="promo" v-for="promo, index in heroSeeder" :key="index">
            <div class="carousel-item" href="#one!" id="one">
                <div class="overlay"></div>
                <div class="container carouselContainer">
                    <div class="flex h-inherit justify-between items-center">
                        <div>
                            <h4 class="heading m-0 fw-700">{{ promo.others }}</h4>
                            <p class="desc">{{ promo.description }}</p>
                            <p class="desc amount">
                                <span class="dblock">From</span>
                                <span class="discount"
                                    ><sup>$</sup>749<sup>99</sup></span
                                >
                            </p>
                            <button
                                class="btn startNowBtn fw-700 capitalize waves waves-effect flex items-center justify-center"
                            >
                                <span>Start Buying </span>
                            </button>
                        </div>
                        <div class="">
                            <img
                                :src="imageUrlWithTimestamp"
                                class="responsive-img"
                            />
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="carousel-item relative" href="#two!" id="two">
                <div class="overlay"></div>
                <div class="container carouselContainer">
                    <div class="flex h-inherit justify-between items-center">
                        <div>
                            <h4 class="heading m-0 fw-700">The new Standard</h4>
                            <p class="desc">Under favorable smartwatches</p>
                            <p class="desc amount">
                                <span class="dblock">From</span>
                                <span class="discount"
                                    ><sup>$</sup>749<sup>99</sup></span
                                >
                            </p>
                            <button
                                class="btn startNowBtn fw-700 capitalize waves waves-effect flex items-center justify-center"
                            >
                                <span>Start Buying </span>
                            </button>
                        </div>
                        <div class="">
                            <img
                                src="https://transvelo.github.io/electro-html/2.0/assets/img/416X420/img2.png"
                                class="responsive-img"
                            />
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item relative" href="#three!" id="three">
                <div>
                    <div class="overlay"></div>
                    <div class="container carouselContainer">
                        <div class="flex h-inherit justify-between items-center">
                            <div>
                                <h4 class="heading m-0 fw-700">The new Standard</h4>
                                <p class="desc">Under favorable smartwatches</p>
                                <p class="desc amount">
                                    <span class="dblock">From</span>
                                    <span class="discount"
                                        ><sup>$</sup>749<sup>99</sup></span
                                    >
                                </p>
                                <button
                                    class="btn startNowBtn fw-700 capitalize waves waves-effect flex items-center justify-center"
                                >
                                    <span>Start Buying </span>
                                </button>
                            </div>
                            <div class="">
                                <img
                                    src="https://transvelo.github.io/electro-html/2.0/assets/img/416X420/img3.png"
                                    class="responsive-img"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
</template>
<script>
    export default {
        computed:{
            imageUrlWithTimestamp() {
                // Append the timestamp as a query parameter to the image URL
                return `${this.heroSeeder[this.index].image}?t=${this.timestamp}`;
            },
        },
        data() {
            return {
                index: 0,
                heroSeeder: [
                    {
                        description: "The new Standard",
                        image: "https://transvelo.github.io/electro-html/2.0/assets/img/416X420/img1.png",
                        others: "Under favorable smartwatches",
                    },
                    {
                        description: "The new Standard",
                        image: "https://transvelo.github.io/electro-html/2.0/assets/img/416X420/img2.png",
                        others: "Under favorable smartwatches",
                    },
                    {
                        description: "The new Standard",
                        image: "https://transvelo.github.io/electro-html/2.0/assets/img/416X420/img3.png",
                        others: "Under favorable smartwatches",
                    },
                ],
            };
        },
        mounted() {
            this.initCarousel();
        },
        methods: {
            initCarousel() {
                document.addEventListener("DOMContentLoaded", () => {
                    let elem = document.getElementById("promo");
                    let instance = M.Carousel.init(elem, {
                        fullWidth: true,
                        indicators: true,
                    });

                    // Autoplay functionality
                    let autoplayInterval = 4500; // Delay between slide transitions in milliseconds
                    let autoplayInstance = setInterval(() => {
                        instance.next();
                    }, autoplayInterval);

                    // Pause autoplay on mouseover and resume on mouseout
                    elem.addEventListener("mouseenter", () => {
                        clearInterval(autoplayInstance);
                    });

                    elem.addEventListener("mouseleave", () => {
                        autoplayInstance = setInterval(() => {
                            instance.next();
                        }, autoplayInterval);
                    });

                    window.next = function () {
                        var el = document.querySelector(".carousel");
                        var l = M.Carousel.getInstance(el);
                        l.next(1);
                    };

                    //carousel previous function
                    window.prev = function () {
                        var el = document.querySelector(".carousel");
                        var l = M.Carousel.getInstance(el);
                        l.prev(1);
                    };
                });
            },
            showHeroEditor() {
                if (this.loggedIn) {
                    this.$emit('showHeroEditor', true);
                }
            }
        },
        props: {
            loggedIn: Boolean,
            hero: Object,
            timestamp: Number
        },
        watch: {
            hero(newVal, oldVal) {
                if (Object.entries(newVal).length > 0) {
                    this.heroSeeder = newVal;
                    // this.heroSeeder.description = newVal.description ?? this.heroSeeder.description;
                    // this.heroSeeder.image = newVal.image ?? this.heroSeeder.image;
                    // this.heroSeeder.others = newVal.others ?? this.heroSeeder.others;
                }
            }
        }
    };
</script>
<style>
    .flex {
        display: flex;
    }
    .justify-between {
        justify-content: space-between;
    }
    .items-center {
        align-items: center;
    }
    .justify-center {
        justify-content: center;
    }
    /* .flex-col {
                flex-direction: column;
            } */
    .carousel .indicators .indicator-item.active {
        background-color: #fed700 !important;
        width: 5vh !important;
        border-radius: 5px;
    }
    .carousel .indicators {
        left: 5% !important;
        text-align: left !important;
    }
    .carousel .indicators .indicator-item {
        background-color: #bcbcbc !important;
    }
    .tabs .indicator {
        background-color: #fed700 !important;
    }
    @media only screen and (min-width: 1024px) {
        .carousel .indicators {
            left: 25% !important;
            text-align: left !important;
        }
    }
    @media only screen and (min-width: 768px) and (max-width: 1023px) {
        .carousel .indicators .indicator-item.active {
            width: 3vh !important;
        }
    }
    @media only screen and (max-width: 767px) {
        .container {
            width: 95% !important;
        }
    }
</style>
<style scoped>
    sup {
        font-size: 60%;
    }
    .dblock {
        display: block;
        font-weight: 300;
        font-size: 0.81288rem;
    }
    .desc.amount {
        line-height: 1;
        margin-top: 3vh;
        margin-bottom: 2vh;
    }
    .discount {
        font-size: 3.12462rem;
        font-weight: 700;
        font-family: "Open Sans", Helvetica, Arial, sans-serif;
    }

    .h-inherit {
        height: inherit;
    }
    .overlay {
        position: absolute;
        /* background-color: #00000059; */
        width: 100%;
        height: 100%;
        color: white;
    }
    #one {
        /* background-image: url("https://transvelo.github.io/electro-html/2.0/assets/img/1920X422/img1.jpg"); */
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        /* position: relative; */
    }

    #two {
        /* background-image: url("https://transvelo.github.io/electro-html/2.0/assets/img/1920X422/img1.jpg"); */
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
    }
    .heading,
    .desc {
        color: #333e48;
        line-height: normal;
        letter-spacing: 0.2px;
        z-index: 1;
        margin: 0;
    }
    .heading {
        font-size: 3.99962rem;
        line-height: 3.56212rem;
        font-weight: 300;
        margin-bottom: 1vh;
    }
    .desc {
        margin-top: 0;
        font-family: "Montserrat", sans-serif;
        font-size: 0.938rem !important;
        width: 523px;
        margin-bottom: 1vh;
        font-weight: 700;
    }
    .startNowBtn {
        padding: 20px 35px;
        background-color: #fed700;
        font-family: "Poppins", sans-serif;
        font-size: 1.00012rem;
        border-radius: 5px;
        text-transform: capitalize;
        color: #333e48;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: "Open Sans", Helvetica, Arial, sans-serif;
    }
    /* Left and Right scroll buttons */
    .carousel-control-prev,
    .carousel-control-next {
        font-size: 24px;
        color: #333e48;
        width: 40px;
        height: 40px;
        line-height: 40px;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
    }

    .carousel-control-prev {
        left: 20px;
    }

    .carousel-control-next {
        right: 10px;
    }
    .carousel {
        height: 450px;
        background-image: url("https://transvelo.github.io/electro-html/2.0/assets/img/1920X422/img1.jpg");
        background-position: center;
        text-transform: uppercase;
        background-repeat: no-repeat;
        font-family: "Open Sans", Helvetica, Arial, sans-serif;
    }

    @media only screen and (min-width: 1024px) {
        .carouselContainer {
            width: 50%;
        }
        .mt-10 {
            margin-top: 10vh;
        }
    }
    @media only screen and (min-width: 768px) and (max-width: 1023px) {
        .carousel {
            height: 368px;
        }
        .heading {
            font-size: 2rem;
        }
        .desc {
            font-size: 1rem !important;
            font-family: "Poppins", sans-serif;
            width: 45vw;
        }
        .carouselContainer {
            width: 90%;
        }
    }
    @media only screen and (max-width: 767px) {
        .carousel {
            height: 300px;
        }
        .carouselContainer {
            padding: 2vh 0;
        }
        .heading {
            font-size: 1.75rem;
        }
        .desc {
            font-size: 1.125rem !important;
            width: 259px;
        }
        .startNowBtn {
            padding: 20px 20px;
        }
    }
</style>